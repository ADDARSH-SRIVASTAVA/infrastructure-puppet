---
classes:
  - apache
  - apache::mod::status
  - collectd
  - collectd::plugin::cpu
  - collectd::plugin::load
  - collectd::plugin::memory
  - collectd::plugin::interface
  - collectd::plugin::write_http
  - svnpubsub
  - vhosts_asf::vhosts
  - vhosts_asf::modules
  
apache::keepalive:          'On'
apache::keepalive_timeout:  '15'
apache::max_keepalive_requests: 1000
apache::timeout: 600
apache::default_vhost:      false
apache::docroot:            '/x1/www/htdocs'

apache::mod::event::listenbacklog: '511'
apache::mod::event::maxclients: '250'
apache::mod::event::maxconnectionsperchild: '200000'
apache::mod::event::maxrequestworkers: '500'
apache::mod::event::maxsparethreads: '150'
apache::mod::event::minsparethreads: '150'
apache::mod::event::serverlimit: '10'
apache::mod::event::startservers: '5'
apache::mod::event::threadlimit: '250'
apache::mod::event::threadsperchild: '50'

apache::mod::status::allow_from:
  - all
apache::mod::status::apache_version: '2.3'

apache::mpm_module:         'event'
apache::serveradmin:        'infrastructure@apache.org'

collectd::purge:  true
collectd::recurse: true
collectd::purge_config: true

collectd::plugin::interface::interfaces: 
  - lo
collectd::plugin::interface::ignoreselected: true

fail2ban::service_autorestart: true
fail2ban::disable: false
fail2ban::service_status: true

fail2ban_asf::config::jails:
  ssh:
    filter: sshd
    action:
      - iptables-allports
    logpath: /var/log/auth.log
    findtime: 1800
    maxretry: 5
    enable: true

fail2ban_asf::config::filters:
  asf-httpd:
    filterfailregex: |
      [[]client <HOST>[]] user .* authentication failure
      [[]client <HOST>[]] user .* not found
      [[]client <HOST>[]] user .* password mismatch

vhosts_asf::modules::modules:
  cgi:
    name: 'cgi'

vhosts_asf::vhosts::vhosts:
  status:
    vhost_name: '*'
    port: 80
    docroot: '/x1/www/status'
    servername: 'status.apache.org'
    directoryindex: 'index.html manage.cgi'
    custom_fragment: |
      AddHandler cgi-script .cgi

