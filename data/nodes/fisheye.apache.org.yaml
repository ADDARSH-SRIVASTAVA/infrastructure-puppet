---
classes:
  - fisheye_asf
  - oraclejava::install
  - apache
  - apache::mod::proxy
  - apache::mod::proxy_http
  - apache::mod::rewrite

oraclejava::install::version: '8'
oraclejava::install::unlimited_jce: true

# fisheye_asf class variables.
fisheye_asf::fisheye_version: '4.2.1'
fisheye_asf::parent_dir: '/usr/local/fisheye'
fisheye_asf::context_path: '/fisheye'

apache::keepalive:          'On'
apache::keepalive_timeout:  '15'
apache::timeout: 600
apache::mpm_module:         'event'

apache::mod::event::listenbacklog: '511'
apache::mod::event::maxclients: '500'
apache::mod::event::maxconnectionsperchild: '200000'
apache::mod::event::maxrequestworkers: '500'
apache::mod::event::maxsparethreads: '250'
apache::mod::event::minsparethreads: '150'
apache::mod::event::serverlimit: '10'
apache::mod::event::startservers: '5'
apache::mod::event::threadlimit: '500'
apache::mod::event::threadsperchild: '50'

logrotate::rule:
    apache2:
          ensure: 'present'


  
custom_fragment: |
          RewriteEngine On
          ProxyPass /intermediates !
          ProxyPass / http://127.0.0.1:8060/
          ProxyPassReverse / http://127.0.0.1:8060/
          RewriteCond $1 !(confluence|intermediates)
